import{defineComponent as e,ref as l,computed as a,watch as t,nextTick as i,onMounted as u,onBeforeUnmount as n,openBlock as s,createElementBlock as r,createElementVNode as o,normalizeStyle as v,unref as d,toDisplayString as h,normalizeClass as c,withDirectives as p,vShow as g,createVNode as f,Transition as m,withCtx as y,createCommentVNode as b,Fragment as x,renderList as w,renderSlot as H,createTextVNode as N,pushScopeId as S,popScopeId as k}from"vue";const $={class:"vlist-vue2"},q={class:"container"},_={class:"list-header"},V={class:"vlist-icon"},W=[(e=>(S("data-v-3ebd9039"),e=e(),k(),e))((()=>o("path",{d:"M512 714.666667c-8.533333 0-17.066667-2.133333-23.466667-8.533334l-341.333333-341.333333c-12.8-12.8-12.8-32 0-44.8 12.8-12.8 32-12.8 44.8 0l320 317.866667 317.866667-320c12.8-12.8 32-12.8 44.8 0 12.8 12.8 12.8 32 0 44.8L533.333333 704c-4.266667 8.533333-12.8 10.666667-21.333333 10.666667z","p-id":"2417",fill:"#c0c4cc"},null,-1)))],E={key:0,class:"no-data"},J=["onClick"];var L=e({name:"VirListV3",props:{modelValue:{type:[String,Number,Boolean],required:!0},labelName:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:"请选择内容"},options:{type:Array,required:!1,default:()=>[]},labelWidth:{type:String,required:!1,default:"72"},labelPositon:{type:String,required:!1,default:"right"},headerHeight:{type:String,required:!1,default:"30"},showNum:{type:Number,required:!1,default:10},lineHeight:{type:Number,required:!1,default:30}},emits:["change"],setup(e,{emit:S}){const k=e,L=l(),M=l(0),O=l(10),C=l(!1),I=l({label:"",value:""}),z=l(!1),A=l(!1);let B=null;const P=l(),T=l(),j=l(),D=l(),F=a((()=>({width:`${k.labelWidth}px`,height:`${k.headerHeight}px`,lineHeight:`${k.headerHeight}px`,textAlign:k.labelPositon}))),G=a((()=>({height:`${k.headerHeight}px`,lineHeight:Number(k.headerHeight)-2+"px"}))),K=a((()=>({height:`${k.headerHeight}px`,lineHeight:`${k.headerHeight}px`}))),Q=a((()=>({width:k.labelName&&`calc(100% - ${k.labelWidth}px)`||"100%",left:k.labelName&&`${k.labelWidth}px`||0,top:`${Number(k.headerHeight)+10}px`}))),R=a((()=>k.options.slice(M.value,O.value))),U=a((()=>C.value||A.value?I.value.label:(R.value.find((e=>e.value===L.value))||{}).label||L.value)),X=()=>{d(T).style["max-height"]=k.lineHeight*function(...e){if(!e.length)throw new Error("比对数值不能为空");return Math.min(...e)}(k.showNum,ee(k.options.length,1))+"px",d(j).style.height=k.lineHeight*ee(k.options.length,1)+"px"};L.value=k.modelValue,t((()=>C.value),((e,l)=>{e&&z.value&&(z.value=!1,i((()=>{(()=>{const e=k.options.findIndex((e=>e.value===L.value));M.value=e>-1&&e||0,O.value=M.value+k.showNum,d(T).scrollTop=M.value*k.lineHeight,d(P).style.top=M.value*k.lineHeight+"px"})()})))})),u((()=>{z.value=!0,X(),(()=>{const e=k.options.findIndex((e=>e.value===L.value));M.value=e>-1&&e||0,O.value=M.value+k.showNum;const l=k.options.find((e=>e.value===L.value))||{label:L.value,value:L.value};I.value=JSON.parse(JSON.stringify(l))})(),i((()=>{B=function(e){const l=l=>{e.value&&(e.value.contains(l.target)||(C.value=!1))};return document.addEventListener("mouseup",l),()=>{document.removeEventListener("mouseup",l)}}(D)}))})),n((()=>{B(),B=null}));const Y=()=>{const{scrollTop:e}=d(T);M.value=Math.floor(e/k.lineHeight),O.value=M.value+k.showNum,d(P).style.top=M.value*k.lineHeight+"px"},Z=()=>{C.value=!C.value};function ee(...e){if(!e.length)throw new Error("比对数值不能为空");return Math.max(...e)}return(l,a)=>(s(),r("div",$,[o("div",q,[o("div",_,[o("div",{class:"header-label",style:v(d(F))},h(e.labelName),5),o("div",{ref_key:"headValue",ref:D,class:"header-value",style:v(d(G)),onClick:Z},[o("span",V,[(s(),r("svg",{t:"1651128828208",class:c(["v-list-svg-icon",C.value?"is-rotate":""]),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2416",width:"14",height:"14"},W,2))]),p(o("span",{class:"placeholder"},h(e.placeholder),513),[[g,!d(U)]]),p(o("span",null,h(d(U)),513),[[g,d(U)]])],4)]),f(m,{name:"el-zoom-in-top"},{default:y((()=>[p(o("div",{ref_key:"listWrap",ref:T,class:"list-wraper",style:v(d(Q)),onScroll:Y},[o("div",{ref_key:"scrollbar",ref:j,class:"scroll-bar"},[e.options.length?b("v-if",!0):(s(),r("div",E,"暂无数据"))],512),o("div",{ref_key:"list",ref:P,class:"list"},[(s(!0),r(x,null,w(d(R),((e,a)=>{return s(),r("div",{key:a,style:v(d(K)),class:c(["list-ele",(t=e,L.value===t.value?"active-line":"")]),onClick:l=>(e=>{A.value=!0;const l=R.value.find((l=>l.value===e.value))||{};L.value=l.value,I.value=JSON.parse(JSON.stringify(l)),S("change",L.value),C.value=!1})(e)},[H(l.$slots,"default",{item:e},(()=>[N(h(e.label),1)]))],14,J);var t})),128))],512)],36),[[g,C.value]])])),_:3})])]))}});L.__scopeId="data-v-3ebd9039",L.__file="packages/vir-list-v3/src/components/index.vue";const M={install(e){e.component("vir-list-v3",L)}};export{M as default};
